/// Configuration schema for Browse - Terminal Web Browser
///
/// To create your own config, copy the defaults and modify:
///   browse --init-config > ~/.config/browse/config.pkl
///
@ModuleInfo { minPklVersion = "0.25.0" }
module browse.Config

/// Display settings
class Display {
  /// Start in wide mode (full terminal width)
  wideMode: Boolean = false

  /// Show scroll percentage in status bar
  showScrollPercentage: Boolean = true

  /// Show URL in status bar
  showUrl: Boolean = true
}

/// Search provider settings
class Search {
  /// Default search provider ("duckduckgo")
  defaultProvider: String = "duckduckgo"
}

/// HTTP fetching settings
class Fetcher {
  /// User agent string for requests
  userAgent: String = "Browse/1.0 (Terminal Browser)"

  /// Request timeout in seconds
  timeoutSeconds: Int = 30

  /// Path to Chrome/Chromium for JS rendering (empty = auto-detect)
  chromePath: String = ""
}

/// Rendering settings
class Rendering {
  /// Default width when piping output (not in terminal)
  defaultWidth: Int = 80

  /// Enable LaTeX math rendering
  latexEnabled: Boolean = true

  /// Enable table rendering
  tablesEnabled: Boolean = true
}

/// Keybinding configuration
/// Each value is a single character or key name
class Keybindings {
  // Navigation
  quit: String = "q"
  scrollDown: String = "j"
  scrollUp: String = "k"
  halfPageDown: String = "d"
  halfPageUp: String = "u"
  goTop: String = "gg"
  goBottom: String = "G"
  prevParagraph: String = "["
  nextParagraph: String = "]"
  prevSection: String = "{"
  nextSection: String = "}"

  // Actions
  openUrl: String = "o"
  search: String = "/"
  copyUrl: String = "y"
  editInEditor: String = "E"
  followLink: String = "f"

  // Overlays
  tableOfContents: String = "t"
  siteNavigation: String = "n"
  linkIndex: String = "l"

  // History & Buffers
  back: String = "b"
  forward: String = "B"
  newBuffer: String = "T"
  nextBuffer: String = "gt"
  prevBuffer: String = "gT"
  bufferList: String = "`"

  // Favourites
  addFavourite: String = "M"
  favouritesList: String = "'"

  // Other
  home: String = "H"
  structureInspector: String = "s"
  toggleWideMode: String = "w"
  inputField: String = "i"
  reloadWithJs: String = "r"
  generateRules: String = "R"
}

/// Main configuration
class Config {
  display: Display = new Display {}
  search: Search = new Search {}
  fetcher: Fetcher = new Fetcher {}
  rendering: Rendering = new Rendering {}
  keybindings: Keybindings = new Keybindings {}
}

/// Default configuration instance
output: Config = new Config {}
